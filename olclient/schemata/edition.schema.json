{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Open Library edition",
  "type": "object",
  "required": [
    "title",
    "key",
    "type",
    "revision",
    "last_modified",
    "works"
  ],
  "properties": {
    "title": { "type": "string" },
    "subtitle": { "type": "string" },
    "type": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "key": {
          "type": "string",
          "enum": ["/type/edition"]
        }
      }
    },
    "key": { "$ref": "#/definitions/edition_key" },

    "publish_date": {
      "type": "string",
      "examples": [
        "1992",
        "December 1992",
        "12 January 2002"
      ]
    },

    "works": { "$ref": "#/definitions/works" },
    "identifiers": { "$ref": "#/definitions/identifiers" },
    "isbn_10": { "$ref": "#/definitions/isbn_10" },
    "isbn_13": { "$ref": "#/definitions/isbn_13" },

    "covers": {
      "type": "array",
      "items": { "type": "number" }
    },
    "publish_places": {
      "type": "array"
    },
    "links": {
      "type": "array",
      "items": { "$ref": "#/definitions/link" }
    },
    "weight": {
      "type": "string",
      "examples": [
        "300 grams",
        "0.3 kilos",
        "12 ounces",
        "1 pounds"
      ]
    },
    "number_of_pages": { "type": "number" },
    "physical_dimensions": {
      "type": "string",
      "examples": [
        "5.4 x 4.7 x 0.2 inches",
        "21 x 14,8 x 0,8 centimeters"
      ]
    },
    "physical_format": {
      "type": "string"
    },
    "publishers": { "type": "array" },
    "subjects": { "$ref": "#/definitions/subjects" },
    "table_of_contents": { "type": "array" },

    "revision":        { "type": "number" },
    "latest_revision": { "type": "number" },
    "created":         { "$ref": "#/definitions/internal_datetime" },
    "last_modified":   { "$ref": "#/definitions/internal_datetime" }
  },

  "definitions": {
    "identifiers": {
      "type": "object"
    },
    "isbn_10": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "([0-9][- ]*){9}[0-9X]"
      }
    },
    "isbn_13": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "([0-9][- ]*){13}"
      }
    },
    "authors": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [ "key" ],
        "properties": {
          "key": { "$ref": "#/definitions/author_key" }
        }
      }
    },
    "works": {
      "type": "array",
      "minItems": 1,
      "maxItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [ "key" ],
        "properties": {
          "key": { "$ref": "#/definitions/work_key" }
        }
      }
    },
    "author_key": {
      "type": "string",
      "pattern": "^/authors/OL[0-9]+A$"
    },
    "edition_key": {
      "type": "string",
      "pattern": "^/books/OL[0-9]+M$"
    },
    "work_key": {
      "type": "string",
      "pattern": "^/works/OL[0-9]+W$"
    },
    "subjects": {
      "type": "array",
      "items": { "type": "string" }
    },
    "link": {
      "type": "object",
      "required": [ "url", "title" ],
      "additionalProperties": false,
      "properties": {
        "url": { "type": "string" },
        "title": { "type": "string" }
      }
    },
    "internal_datetime": {
      "type": "object",
      "required": [ "type", "value" ],
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": ["/type/datetime"]
        },
        "value": { "type": "string" }
      }
    }
  }
}
